name: Upload branch to Upload Server
on: [push]
jobs:
  deploy_job:
    runs-on: ubuntu-latest
    name: deploy
    steps:
      - name: checkout
        uses: actions/checkout@v2
      - name: getting branch name
        shell: bash
        run: echo "##[set-output name=branch;]$(echo ${GITHUB_REF#refs/heads/})"
        id: branch_name
      - name: zipping files
        run: zip -r ${{ github.event.repository.name }}_${{ steps.branch_name.outputs.branch }}.zip . -x '*.git*'
      - name: uploading archive
        uses: wlixcc/SFTP-Deploy-Action@v1.0
        with:
          username: 'boomi'
          server: 'upload.zoominsoftware.io'
          ssh_private_key: 'MIIJKQIBAAKCAgEAvkDGhHkVx4w3xOCMOwIOmanG5tNKWK8297K7/CXbQ3jLj0+wnbpxIkjjGvfJxGVqEOK5M6ukWVg2BqyhX0FO+yv/Ez3EkBDSzveCvTPxKI8NuR8x/0Lyp8oH+MPK/M3BHfkzfY2rzkHVQgVkyOB2qo8W4L7IZdvUk71o8nos4x63g+V2qMMZbispF38QV2WFDl6Ov+RNtXZNn/VRGjsc2InClel/LstuDAgXqFcNsp60zCet1CQcUd/6pAG9L39MnVFrhzwn3lq9A+Wdo6V7fliYIn1+fSk+88IOHt+arOoT7T08jIoQ0jKZnNSmK0QiMN7xo2HfJts04MNTvJSYm7RkbeZt+sBZuzTJRsqunpFcEwKpyWvCniIe2K8UI58rOCicfEurT6aIBtpUUFw+E5cqC1eNgqU7q15/ZPlXH4vrBqDOpC2jjLQWGBoZaciSigHMIPt6MdDouWn8PPz67eYX6wnobDWVT1b2xlNZDiRPYfct7aoL88KPyIOa6hHBpccAHmYZ24cjJDV7HCnkJBnljD/aHPolxBbpbHx/doTg1A66IrREvpsTLReMP5SZf6QA2sMy2yMHt/d7Y2nXydOx8DljOpfk3geuaykywYgmOa7a6Qp2TSEqOtyRhw7ZpN/NDkDwCUlFFEVbIeXIii1Rf+k7WmUes7pLOl70mBUCAwEAAQKCAgEArnR5VLovhXaHIQoCrI07VB6BW+H9t4qbbdDAXftcrucSScx6GHgBC74oOe9jXarc8rTjvIS0xJSFneMoak9ZnCoA0OT/3FcA53XAtbvudBGRNOJtFzONjNxOKQdomB4X6mM7mvKQyyZE5jBJ9YUWa1mgUd+/pN9Kc1ro5AeyJ2VgRBrijuev5vy+xmPmWS2nL8D3RvCTbUUY8wehIdt4nPrdqledHwy9UV0OTHffAJ5VDSuJUxD1wwIOM9vAXdBuMYeagTxhFpy/29XukkPJFNcqUd4fYaezqROVnSvPCqXuNcnEPt7Pg9+QSmYYJW5pp8SXcQjq9hdlyoBxxWfA8tfd/gVF1ien0XzB4qikzajJT/FQ35fQsn+VBc9+OSXy3qxbEeTCWfLKutWNLbCMrQ9d1KtLKS/2Vdnih65OyhSkBLpk+eNX60kFNBLB3p6picPV9yAdysBcgMEzVcpJRcEsp8E5QK6xj+fneO51hEuDETFDaA65DpVEBTmv9Pw9fa8HBpRWZbhfD+eSb5T2Ru9XMEMPeC18ALEbYEE2FEkvDzhphpbXXEzoUSR+6iy5RBDtzzvTYa/KX+KxWeEr3KnYJ8eFGIRlai07gPm90NaARyaCMyPJoQPxwPY+ZCiqICYPFo2wcSd+FUsUxQZxK4y15nlh4ted1nycaT4WAZUCggEBAPCR3qYFCNBOv8hXRg2mnpIQF4wA0wqOXxJdlXkdyco6JiR4TfAoTrr5QUy2sYdJsEMu0cexEFagaHsYEtzvtw75DcFaTtIKVikndnjs22l38fAFSGv4ABwsJ5s+mwqxB5M8mMTxa81U0GARslzj1RRsqrYUe8bUrikeY3HhaiAzCZBFBooHLZ50jduROOf7vXHqTyOT+eEFdi59KqSm3YltY4KoNw24YIahgeUTzEInaPWbP036ohKji80o6W9FUIN2pSzhAcDu4ER3lZtH/UToMZMcGMXcv537NRaIDC76J6GdxmM7pVZDU3l7U7kUVl+fCEa6cfuDYtY7ik+Rf1sCggEBAMp0tbAQJ1iyTpZt9Vy2YxoQ92sNcQukby4wmjncKH4ewWEQaOO3qWdZH7NQ4qwZtfmARlu1JqRNFYCM7MfoCOtNZIyVSo67LLt8Ern2eHb3oHONNq/9psoPiQmkblJylx31o7Pb7iDNsVlLDGW70cJCgF440EYrTNkwqt6Kdo7h6c5Z6LWUldzWCHNV2+p5OMQC223ruCCgjGv6PSVuPO2vh0NnxDXt0R4vD3WfqQLqUThig4xqofSRygVMVeLynvsbOvb73BPqmh/ebVnzfzzgo31sg2tFuhTg1QO4HR81U9PA+MGHkF4je+zvauNB/VhdO+jTJiHkbKAT3yFP0U8CggEAVAMtFR9294A425cW4NeKUwoJnxv+l5Ymv3wtIhH0EYqDHYNh/HenHwbC9i5rCwsB4kRsgGdmhEoakrpShBO3AySY2ChYlGOFuXONnSdibI+1zxOZOhNuvmfxIPcZH/+43INx+n0xH5D6AELN3kC2fh6A83ttyn8lnzh8lB2beUk5ksd4RCXDma2siLxLekBg5XJlVtBrmFjW799IUB3yCfdIpC1opIL6OqoWedCTKZsnvXYNAod/qDCzNt+Nvg0f0/lQL78YZK9HZMG6XnMikLjh7zUFtbuks2AyJv81+gXkZz15Ndhzog97DFa0Y1Ml4tjgBAtCmQpGLvi2EZmHNwKCAQEAjrhnvI4mrqhELleluI36ns2HHbiEEKkCl5U7o75H7WDRAhQHXUCD848ogchrgtc9KX38G3pAm2Kb3dt6sBIq93W/hDtaK/RXPHPi36WYloVKXysVektd4OPCv0FjZEvTrBMWLBzGaemXNFNrkewtmrw2sjVq3Yx4yEM+sVL68Q7hO8619gug+eUIYAYO2eRK2CMLfRnG23lShGwL3u8vlH9A44urDjlwSc7zHwBGrP9x8kXAZqRlN3vu5n1BrpNK78nqb2Jtarzfmce7XsYA1HGnzytIGb81xrIYeF66aN23Enfe5M8kPrjVC9pbh4llh31yVldDcnENAmv/yAP0kQKCAQAA1bmxfPzZPRMITpPrTNsgN3GfuLqBT708ZVv390IuZtan6wz9XRs+6JYFGOyXHTt3sskUOqF34HBZZVKeevoQVfAmfHDpg/Wcvno0xxK2jaMbIYQtKCEtq0IsqGcsnsc/7IxupMjiyUroiZCsOmeORcIdr7FKuPsWvmiQREZQEvkG00T1c8jeiKg/UQywUFDCs/pfIYiYG5iasbeDLFmns7KgjJSJRFTL60ba3OXXd4wHWDIsR6rF2RCnIJ3FQq3wo1c4QNnJ0DEb/q6xcF4nbXXqIYpnj7AYAH3Wb4gVAVGbGOiVXGAP+BwYo3UftdHuG0Z/YI3vrWActwv3VpM'          
          local_path: ${{ github.event.repository.name }}_${{ steps.branch_name.outputs.branch }}.zip
          remote_path: 'boomi-be-staging.zoominsoftware.io/dita-vasont/incoming'
          # remote_path: 'storm-be-dev.zoominsoftware.io/${{ steps.branch_name.outputs.branch }}/incoming/'
          args: '-o ConnectTimeout=5'
